!function(e){if("function"==typeof bootstrap)bootstrap("mona",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeMona=e}else"undefined"!=typeof window?window.mona=e():global.mona=e()}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){"use strict";function parse(parser,string,opts){opts=opts||{},opts.throwOnError="undefined"==typeof opts.throwOnError?!0:opts.throwOnError,opts.allowTrailing||(parser=followedBy(parser,eof()));var parserState=parser(new ParserState(void 0,string,0,opts.userState,opts.position||new SourcePosition(opts.fileName),!1));if(parserState.failed&&opts.throwOnError)throw parserState.error;return parserState.failed&&!opts.throwOnError?parserState.error:parserState.failed||opts.throwOnError?opts.returnState?parserState:parserState.value:parserState}function parseAsync(parser,callback,opts){function exec(){if(done&&!buffer.length)return!1;var res;try{res=parse(collect(parser,{min:1}),buffer,opts),opts.position=res.position,buffer=res.input.slice(res.offset)}catch(e){return(!e.wasEof||done)&&callback(e),!1}return res.value.forEach(function(val){callback(null,val)}),!0}function errIfDone(cb){return function(){if(done)throw new Error("AsyncParser closed");return cb.apply(null,arguments)}}opts=copy(opts||{}),opts.throwOnError=!0,opts.returnState=!0,opts.allowTrailing=!0;var done=!1,buffer="",handle={done:errIfDone(function(){for(done=!0,buffer="";exec(););return handle}),data:errIfDone(function(data){for(buffer+=data;exec(););return handle}),error:errIfDone(function(error){return done=!0,callback(error),handle})};return handle}function SourcePosition(name,line,column){this.name=name,this.line=line||1,this.column=column||0}function ParserError(pos,messages,type,wasEof){Error.captureStackTrace&&Error.captureStackTrace(this,this),this.position=pos,this.messages=messages,this.type=type,this.wasEof=wasEof,this.message="(line "+this.position.line+", column "+this.position.column+") "+this.messages.join("\n")}function value(val){return function(parserState){var newState=copy(parserState);return newState.value=val,newState}}function bind(parser,fun){return function(parserState){var newParserState=parser(parserState);if(!(newParserState instanceof ParserState))throw new Error("Parsers must return a parser state object");return newParserState.failed?newParserState:fun(newParserState.value)(newParserState)}}function fail(msg,type){return msg=msg||"parser error",type=type||"failure",function(parserState){parserState=copy(parserState),parserState.failed=!0;var newError=new ParserError(parserState.position,[msg],type,"eof"===type);return parserState.error=mergeErrors(parserState.error,newError),parserState}}function label(parser,msg){return function(parserState){var newState=parser(parserState);return newState.failed&&(newState=copy(newState),newState.error=new ParserError(newState.error.position,["expected "+msg],"expectation",newState.error.wasEof)),newState}}function token(count){return count=count||1,function(parserState){var input=parserState.input,offset=parserState.offset,newOffset=offset+count,newParserState=copy(parserState),newPosition=copy(parserState.position);newParserState.position=newPosition;for(var i=offset;newOffset>i&&input.length>=i;i++)"\n"===input.charAt(i)?(newPosition.column=0,newPosition.line+=1):newPosition.column+=1;return newParserState.offset=newOffset,input.length>=newOffset?(newParserState.value=input.slice(offset,newOffset),newParserState):fail("unexpected eof","eof")(newParserState)}}function eof(){return function(parserState){return parserState.input.length===parserState.offset?value(!0)(parserState):fail("expected end of input","expectation")(parserState)}}function delay(constructor){var args=[].slice.call(arguments,1);return function(parserState){return constructor.apply(null,args)(parserState)}}function log(parser,tag,level){return level=level||"log",function(parserState){var newParserState=parser(parserState);return console[level](tag+" :: ",parserState," => ",newParserState),newParserState}}function map(transformer,parser){return bind(parser,function(result){return value(transformer(result))})}function tag(parser,key){return map(function(x){var ret={};return ret[key]=x,ret},parser)}function lookAhead(parser){return function(parserState){var ret=parser(parserState),newState=copy(parserState);return newState.value=ret.value,newState}}function is(predicate){return bind(token(),function(tok){return predicate(tok)?value(tok):fail()})}function isNot(predicate){return is(function(x){return!predicate(x)})}function and(firstParser){var moreParsers=[].slice.call(arguments,1);if(!firstParser)throw new Error("and() requires at least one parser");return bind(firstParser,function(result){return moreParsers.length?and.apply(null,moreParsers):value(result)})}function or(){function orHelper(){var parsers=[].slice.call(arguments);return function(parserState){var res=parsers[0](parserState);if(res.failed&&errors.push(res.error),res.failed&&parsers[1])return orHelper.apply(null,parsers.slice(1))(parserState);if(res.failed){var finalState=copy(res);return finalState.error=errors.reduce(function(err1,err2){return mergeErrors(err1,err2)}),finalState}return res}}var errors=[],labelMsg="string"==typeof arguments[arguments.length-1]&&arguments[arguments.length-1],args=labelMsg?[].slice.call(arguments,0,arguments.length-1):arguments,parser=orHelper.apply(null,args);return labelMsg?label(parser,labelMsg):parser}function maybe(parser){return or(parser,value())}function not(parser){return function(parserState){return parser(parserState).failed?value(!0)(parserState):fail("expected parser to fail","expectation")(parserState)}}function unless(parser){var moreParsers=[].slice.call(arguments,1);return and.apply(null,[not(parser)].concat(moreParsers))}function sequence(fun){return function(parserState){function s(parser){if(state=parser(state),state.failed)throw failwhale;return state.value}var state=parserState,failwhale={};try{var ret=fun(s);if("function"!=typeof ret)throw new Error("sequence function must return a parser");var newState=ret(state);if(!(newState instanceof ParserState))throw new Error("sequence function must return a parser");return newState}catch(x){if(x===failwhale)return state;throw x}}}function followedBy(parser){var parsers=[].slice.call(arguments,1);return bind(parser,function(result){return bind(and.apply(null,parsers),function(){return value(result)})})}function split(parser,separator,opts){return opts=opts||{},opts.min?(opts=copy(opts),opts.min=opts.min&&opts.min-1,opts.max=opts.max&&opts.max-1,sequence(function(s){var x=s(parser),xs=s(collect(and(separator,parser),opts)),result=[x].concat(xs);return value(result)})):or(split(parser,separator,{min:1,max:opts.max}),value([]))}function splitEnd(parser,separator,opts){opts=opts||{};var enforceEnd="undefined"==typeof opts.enforceEnd?!0:opts.enforceEnd;return enforceEnd?collect(followedBy(parser,separator),opts):sequence(function(s){var last,min=opts.min||0,max=opts.max||1/0,results=s(splitEnd(parser,separator,{min:opts.min&&min-1,max:opts.max&&max-1}));return opts.min>results.length||opts.max?(last=s(followedBy(parser,maybe(separator))),value(results.concat([last]))):(last=s(maybe(parser)),last?value(results.concat([last])):value(results))})}function collect(parser,opts){opts=opts||{};var min=opts.min||0,max="undefined"==typeof opts.max?1/0:opts.max;if(min>max)throw new Error("min must be less than or equal to max");return function(parserState){for(var prev=parserState,s=parserState,res=[],i=0;s=parser(s),max>i&&!s.failed;)res.push(s.value),i++,prev=s;return min&&res.length<min?s:value(res)(prev)}}function exactly(parser,n){return collect(parser,{min:n,max:n})}function between(open,close,parser){return and(open,followedBy(parser,close))}function skip(parser){return and(collect(parser),value())}function range(start,end,parser,predicate){return parser=parser||token(),predicate=predicate||function(x,y){return y>=x},label(bind(parser,function(result){return predicate(start,result)&&predicate(result,end)?value(result):fail()}),"value between {"+start+"} and {"+end+"}")}function stringOf(parser){return bind(parser,function(xs){return xs.hasOwnProperty("length")&&xs.join?value(xs.join("")):fail()})}function oneOf(chars,caseSensitive){return caseSensitive="undefined"==typeof caseSensitive?!0:caseSensitive,chars=caseSensitive?chars:chars.toLowerCase(),label(is(function(x){return x=caseSensitive?x:x.toLowerCase(),~chars.indexOf(x)}),"one of {"+chars+"}")}function noneOf(chars,caseSensitive){return caseSensitive="undefined"==typeof caseSensitive?!0:caseSensitive,chars=caseSensitive?chars:chars.toLowerCase(),label(is(function(x){return x=caseSensitive?x:x.toLowerCase(),!~chars.indexOf(x)}),"none of {"+chars+"}")}function string(str,caseSensitive){return caseSensitive="undefined"==typeof caseSensitive?!0:caseSensitive,str=caseSensitive?str:str.toLowerCase(),label(sequence(function(s){var x=s(is(function(x){return x=caseSensitive?x:x.toLowerCase(),x===str[0]},str.charAt(0))),xs=str.length>1?s(string(str.slice(1),caseSensitive)):"";return value(x+xs)}),"string matching {"+str+"}")}function alphaUpper(){return label(range("A","Z"),"uppercase alphabetical character")}function alphaLower(){return label(range("a","z"),"lowercase alphabetical character")}function alpha(){return or(alphaLower(),alphaUpper(),"alphabetical character")}function digit(base){return base=base||10,label(is(function(x){return!isNaN(parseInt(x,base))}),"digit")}function alphanum(base){return label(or(alpha(),digit(base)),"alphanum")}function space(){return label(oneOf(" 	\n\r"),"space")}function spaces(){return label(and(space(),skip(space()),value(" ")),"spaces")}function text(parser,opts){return parser=parser||token(),opts=opts||{},stringOf(collect(parser,opts))}function trim(parser){return between(maybe(spaces()),maybe(spaces()),parser)}function trimLeft(parser){return and(maybe(spaces()),parser)}function trimRight(parser){return followedBy(parser,maybe(spaces()))}function natural(base){return base=base||10,map(function(str){return parseInt(str,base)},text(digit(base),{min:1}))}function integer(base){return base=base||10,sequence(function(s){var sign=s(maybe(or(string("+"),string("-")))),num=s(natural(base));return value(num*("-"===sign?-1:1))})}function float(){return sequence(function(s){for(var leftSide=s(integer()),rightSide=s(or(and(string("."),integer()),value(0)));rightSide>1;)rightSide/=10;rightSide=leftSide>=0?rightSide:-1*rightSide;var e=s(or(and(string("e",!1),integer()),value(0)));return value((leftSide+rightSide)*Math.pow(10,e))})}function copy(obj){var newObj=Object.create(Object.getPrototypeOf(obj));for(var key in obj)obj.hasOwnProperty(key)&&(newObj[key]=obj[key]);return newObj}function mergeErrors(err1,err2){if(!err1||!err1.messages.length&&err2.messages.length)return err2;if(!err2||!err2.messages.length&&err1.messages.length)return err1;switch(comparePositions(err1.position,err2.position)){case"gt":return err1;case"lt":return err2;case"eq":var newMessages=err1.messages.concat(err2.messages).reduce(function(acc,x){return~acc.indexOf(x)?acc:acc.concat([x])},[]);return new ParserError(err2.position,newMessages,err2.type,err2.wasEof||err1.wasEof);default:throw new Error("This should never happen")}}function comparePositions(pos1,pos2){return pos1.line<pos2.line?"lt":pos1.line>pos2.line?"gt":pos1.column<pos2.column?"lt":pos1.column>pos2.column?"gt":"eq"}function ParserState(value,input,offset,userState,position,hasConsumed,error,failed){this.value=value,this.input=input,this.offset=offset,this.position=position,this.userState=userState,this.failed=failed,this.error=error}var VERSION="0.7.0";ParserError.prototype=new Error,ParserError.prototype.constructor=ParserError,ParserError.prototype.name="ParserError",module.exports={version:VERSION,parse:parse,parseAsync:parseAsync,value:value,bind:bind,fail:fail,label:label,token:token,eof:eof,log:log,delay:delay,map:map,tag:tag,lookAhead:lookAhead,is:is,isNot:isNot,and:and,or:or,maybe:maybe,not:not,unless:unless,sequence:sequence,followedBy:followedBy,split:split,splitEnd:splitEnd,collect:collect,exactly:exactly,between:between,skip:skip,range:range,stringOf:stringOf,oneOf:oneOf,noneOf:noneOf,string:string,alphaLower:alphaLower,alphaUpper:alphaUpper,alpha:alpha,digit:digit,alphanum:alphanum,space:space,spaces:spaces,text:text,trim:trim,trimLeft:trimLeft,trimRight:trimRight,natural:natural,integer:integer,"float":float}},{}]},{},[1])(1)});
//# sourceMappingURL=mona.js.src