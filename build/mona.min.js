!function(e){if("function"==typeof bootstrap)bootstrap("mona",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeMona=e}else"undefined"!=typeof window?window.mona=e():global.mona=e()}(function(){var define,ses,bootstrap,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var VERSION="0.5.0";function parse(parser,string,opts){opts=opts||{throwOnError:true};var parseState=parser(new ParserState(undefined,string,0,opts.userState,opts.position||new SourcePosition(opts.fileName),false));if(parseState.failed&&opts.throwOnError){throw parseState.error}else if(parseState.failed&&!opts.throwOnError){return parseState.error}else if(opts.returnState){return parseState}else{return parseState.value}}function parseAsync(parser,callback,opts){opts=copy(opts||{});opts.throwOnError=true;opts.returnState=true;var done=false,buffer="";function exec(){if(done&&!buffer.length){return false}var res;try{res=parse(collect(parser,1),buffer,opts);opts.position=res.position;buffer=res.input.slice(res.offset)}catch(e){if(!e.wasEof||done){callback(e)}return false}res.value.forEach(function(val){callback(null,val)});return true}function errIfDone(cb){return function(){if(done){throw new Error("AsyncParser closed")}else{return cb.apply(null,arguments)}}}var handle={done:errIfDone(function(){done=true;buffer="";while(exec()){}return handle}),data:errIfDone(function(data){buffer+=data;while(exec()){}return handle}),error:errIfDone(function(error){done=true;callback(error);return handle})};return handle}function SourcePosition(name,line,column){this.name=name;this.line=line||1;this.column=column||1}function ParseError(pos,messages,type,wasEof){if(Error.captureStackTrace){Error.captureStackTrace(this,this)}this.position=pos;this.messages=messages;this.type=type;this.wasEof=wasEof;this.message="(line "+this.position.line+", column "+this.position.column+") "+this.messages.join("\n")}ParseError.prototype=new Error;ParseError.prototype.constructor=ParseError;ParseError.prototype.name="ParseError";function value(val){return function(parserState){var newState=copy(parserState);newState.value=val;return newState}}function bind(parser,fun){return function(parserState){var newParserState=parser(parserState);if(!(newParserState instanceof ParserState)){throw new Error("Parsers must return a parser state object")}if(newParserState.failed){return newParserState}else{return fun(newParserState.value)(newParserState)}}}function fail(msg,type,replaceError){msg=msg||"parser error";type=type||"failure";return function(parserState){parserState=copy(parserState);parserState.failed=true;var newError=new ParseError(parserState.position,[msg],type,type==="eof");parserState.error=mergeErrors(parserState.error,newError,replaceError);return parserState}}function expected(descriptor){return fail("expected "+descriptor,"expectation",true)}function token(count){count=count||1;return function(parserState){var input=parserState.input,offset=parserState.offset,newOffset=offset+count;if(input.length>=newOffset){var newParserState=copy(parserState),newPosition=copy(parserState.position);for(var i=offset;i<newOffset;i++){if(input.charAt(i)==="\n"){newPosition.column=1;newPosition.line+=1}else{newPosition.column+=1}}newParserState.value=input.slice(offset,newOffset);newParserState.offset=newOffset;newParserState.position=newPosition;return newParserState}else{return fail("unexpected eof","eof")(parserState)}}}function eof(){return function(parserState){if(parserState.input.length===parserState.offset){return value(true)(parserState)}else{return expected("end of input")(parserState)}}}function delay(constructor){var args=[].slice.call(arguments,1);return function(parserState){return constructor.apply(null,args)(parserState)}}function log(parser,tag,level){level=level||"log";return function(parserState){var newParserState=parser(parserState);console[level](tag+" :: ",parserState," => ",newParserState);return newParserState}}function map(transformer,parser){return bind(parser,function(result){return value(transformer(result))})}function tag(parser,key){return map(function(x){var ret={};ret[key]=x;return ret},parser)}function lookAhead(parser){return function(parserState){var ret=parser(parserState),newState=copy(parserState);newState.value=ret.value;return newState}}function and(firstParser){var moreParsers=[].slice.call(arguments,1);return bind(firstParser,function(result){return moreParsers.length?and.apply(null,moreParsers):value(result)})}function or(){function orHelper(){var parsers=[].slice.call(arguments);return function(parserState){var res=parsers[0](parserState);if(res.failed){parserState=copy(parserState);parserState.error=mergeErrors(parserState.error,res.error)}if(res.failed&&parsers[1]){return orHelper.apply(null,parsers.slice(1))(parserState)}else{return res}}}return orHelper.apply(null,arguments)}function maybe(parser){return or(parser,value())}function not(parser){return function(parserState){return parser(parserState).failed?value(true)(parserState):fail("expected parser to fail")(parserState)}}function unless(parser){var moreParsers=[].slice.call(arguments,1);return and.apply(null,[not(parser)].concat(moreParsers))}function sequence(fun){return function(parserState){var state=parserState,failwhale={};function s(parser){state=parser(state);if(state.failed){throw failwhale}else{return state.value}}try{var ret=fun(s);if(typeof ret!=="function"){throw new Error("sequence function must return a parser")}var newState=ret(state);if(!(newState instanceof ParserState)){throw new Error("sequence function must return a parser")}return newState}catch(x){if(x===failwhale){return state}else{throw x}}}}function followedBy(parser){var parsers=[].slice.call(arguments,1);return bind(parser,function(result){return bind(and.apply(null,parsers),function(){return value(result)})})}function separatedBy(parser,separator,minimum){minimum=typeof minimum==="undefined"?0:minimum;if(minimum===0){return or(separatedBy(parser,separator,1),value([]))}else{return sequence(function(s){var x=s(parser);var xs=s(collect(and(separator,parser)));var result=[x].concat(xs);if(result.length>=minimum){return value(result)}else{return fail("expected at least "+minimum+"values from separatedBy")}})}}function endedBy(parser,separator,enforceEnd,minimum){enforceEnd=typeof enforceEnd==="undefined"?true:enforceEnd;return followedBy(separatedBy(parser,separator,minimum),enforceEnd?separator:maybe(separator))}function collect(parser,min,max){min=min||0;max=typeof max==="undefined"?Infinity:max;if(min>max){throw new Error("min must be less than or equal to max")}return function(parserState){var prev=parserState,s=parserState,res=[],i=0;while(s=parser(s),i<max&&!s.failed){res.push(s.value);i++;prev=s}if(min&&res.length<min){return s}else{return value(res)(prev)}}}function exactly(parser,n){return collect(parser,n,n)}function between(open,close,parser){return and(open,followedBy(parser,close))}function skip(parser){return and(collect(parser),value())}function satisfies(predicate,predicateName){predicateName=predicateName||"predicate";return or(bind(token(),function(c){if(predicate(c)){return value(c)}else{return fail()}}),expected("token matching "+predicateName))}function stringOf(parser){return or(bind(parser,function(xs){if(xs.hasOwnProperty("length")&&xs.join){return value(xs.join(""))}else{return fail()}}),expected("an array-like from parser"))}function oneOf(chars,caseSensitive){caseSensitive=typeof caseSensitive==="undefined"?true:caseSensitive;chars=caseSensitive?chars:chars.toLowerCase();return or(satisfies(function(x){x=caseSensitive?x:x.toLowerCase();return~chars.indexOf(x)}),expected("one of {"+chars+"}"))}function noneOf(chars,caseSensitive){caseSensitive=typeof caseSensitive==="undefined"?true:caseSensitive;chars=caseSensitive?chars:chars.toLowerCase();return or(satisfies(function(x){x=caseSensitive?x:x.toLowerCase();return!~chars.indexOf(x)}),expected("none of {"+chars+"}"))}function string(str,caseSensitive){caseSensitive=typeof caseSensitive==="undefined"?true:caseSensitive;str=caseSensitive?str:str.toLowerCase();return or(sequence(function(s){var x=s(satisfies(function(x){x=caseSensitive?x:x.toLowerCase();return x===str[0]},str.charAt(0)));var xs=str.length>1?s(string(str.slice(1),caseSensitive)):"";return value(x+xs)}),expected("string matching {"+str+"}"))}function digit(base){base=base||10;return or(satisfies(function(x){return!isNaN(parseInt(x,base))}),expected("digit"))}function space(){return or(oneOf(" 	\n\r"),expected("space"))}function spaces(){return or(and(space(),skip(space()),value(" ")),expected("spaces"))}function text(parser,parserName){if(!parser){parserName="token";parser=token()}return or(stringOf(collect(parser)),expected("text"+(typeof parserName!=="undefined"?" of {"+parserName+"}":"")))}function trim(parser){return between(maybe(spaces()),maybe(spaces()),parser)}function trimLeft(parser){return and(maybe(spaces()),parser)}function trimRight(parser){return followedBy(parser,maybe(spaces()))}function naturalNumber(base){base=base||10;return sequence(function(s){var xs=s(collect(digit(base),1));return value(parseInt(xs.join(""),base))})}function integer(base){base=base||10;return sequence(function(s){var sign=s(maybe(or(string("+"),string("-")))),num=s(naturalNumber(base));return value(num*(sign==="-"?-1:1))})}function float(base){base=base||10;return sequence(function(s){var leftSide=s(integer(base));var rightSide=s(or(and(string("."),integer(base)),value(0)));while(rightSide>1){rightSide=rightSide/10}rightSide=leftSide>=0?rightSide:rightSide*-1;var e=s(or(and(string("e",false),integer(base)),value(0)));return value((leftSide+rightSide)*Math.pow(10,e))})}module.exports={version:VERSION,parse:parse,parseAsync:parseAsync,value:value,bind:bind,fail:fail,expected:expected,token:token,eof:eof,log:log,delay:delay,map:map,tag:tag,lookAhead:lookAhead,and:and,or:or,maybe:maybe,not:not,unless:unless,sequence:sequence,followedBy:followedBy,separatedBy:separatedBy,endedBy:endedBy,collect:collect,exactly:exactly,between:between,skip:skip,satisfies:satisfies,stringOf:stringOf,oneOf:oneOf,noneOf:noneOf,string:string,digit:digit,space:space,spaces:spaces,text:text,trim:trim,trimLeft:trimLeft,trimRight:trimRight,naturalNumber:naturalNumber,integer:integer,"float":float};function copy(obj){var newObj=Object.create(Object.getPrototypeOf(obj));for(var key in obj){if(obj.hasOwnProperty(key)){newObj[key]=obj[key]}}return newObj}function mergeErrors(err1,err2,replaceError){if(!err1||!err1.messages.length&&err2.messages.length){return err2}else if(!err2||!err2.messages.length&&err1.messages.length){return err1}else{var pos;if(replaceError){pos=err2.position}else{switch(comparePositions(err1.position,err2.position)){case"gt":pos=err1.position;break;case"lt":pos=err2.position;break;case"eq":pos=err1.position;break}}var newMessages=replaceError?err2.messages:err1.messages.concat(err2.messages).reduce(function(acc,x){return~acc.indexOf(x)?acc:acc.concat([x])},[]);return new ParseError(pos,newMessages,err2.type,err2.wasEof||err1.wasEof)}}function comparePositions(pos1,pos2){if(pos1.line<pos2.line){return"lt"}else if(pos1.line>pos2.line){return"gt"}else if(pos1.column<pos2.column){return"lt"}else if(pos1.column>pos2.column){return"gt"}else{return"eq"}}function ParserState(value,input,offset,userState,position,hasConsumed,error,failed){this.value=value;this.input=input;this.offset=offset;this.position=position;this.userState=userState;this.failed=failed;this.error=error}},{}]},{},[1])(1)});
//# sourceMappingURL=build/mona.js.src